jQuery(document).ready(function(b){c();function c(){var f=new Muuri(".wpsi-grid",{dragEnabled:true,dragSortHeuristics:{sortInterval:50,minDragDistance:10,minBounceBackAngle:1},dragPlaceholder:{enabled:false,duration:400,createElement:function(h){return h.getElement().cloneNode(true)}},dragReleaseDuration:400,dragReleseEasing:"ease",layoutOnInit:true}).on("move",function(){e(f)});var g=window.localStorage.getItem("layout");if(g){d(f,g)}else{f.layout(true)}e(f)}function a(g){var f=g.getItems().map(function(h){return h.getElement().getAttribute("data-id")});return JSON.stringify(f)}function e(f){var g=a(f);window.localStorage.setItem("layout",g)}function d(g,n){var j=JSON.parse(n);var l=g.getItems();b(".wpsi-item").each(function(){var i=b(this).data("id");if(localStorage.getItem("toggle_data_id_"+i)===null){window.localStorage.setItem("toggle_data_id_"+i,"checked")}if(window.localStorage.getItem("toggle_data_id_"+i)=="checked"){b(this).addClass("muuri-active")}else{b(this).removeClass("muuri-active")}});var k=l.map(function(i){return i.getElement().getAttribute("data-id")});var o=[];var m;var f;for(var h=0;h<j.length;h++){m=j[h];f=k.indexOf(m);if(f>-1){o.push(l[f])}}g.sort(o,{layout:"instant"});g.filter(".muuri-active")}b(".wpsi-item").each(function(){var f=b(this).data("id");if(!window.localStorage.getItem("toggle_data_id_"+f)){window.localStorage.setItem("toggle_data_id_"+f,"checked")}b("#toggle_data_id_"+f).change(function(){if(document.getElementById("toggle_data_id_"+f).checked){window.localStorage.setItem("toggle_data_id_"+f,"checked")}else{window.localStorage.setItem("toggle_data_id_"+f,"unchecked")}c()})})});