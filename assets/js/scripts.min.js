jQuery(document).ready(function(e){i();function i(){e(".wpsi-table").each(function(){e(this).DataTable({dom:'frt<"table-footer"p><"clear">B',pageLength:6,conditionalPaging:true,buttons:[{extend:"csv",text:"Download CSV"}],language:{paginate:{previous:"Previous",next:"Next",},searchPlaceholder:"Search",search:"",emptyTable:"No searches recorded yet!"},order:[[1,"desc"]],})});e(".dataTables_filter").each(function(){e(this).append(wpsi.dateFilter)})}e(".wpsi-date-container").html(wpsi.dateFilter);e(document).on("change",".wpsi-date-filter",function(){var k=e(this).closest(".item-content");var j=(k.find(".dataTable").length);var l=k.find(".wpsi-date-filter").val();var m=e(this).closest(".wpsi-item").data("table_type");e.ajax({type:"GET",url:wpsi.ajaxurl,dataType:"json",data:({action:"wpsi_get_datatable",range:l,type:m,token:wpsi.token}),success:function(n){k.html(n.html);if(j){i()}else{k.find(".wpsi-date-container").html(wpsi.dateFilter)}k.find(".wpsi-date-filter").val(l)}})});var g=e("#wpsi-recent-table_wrapper > div.dt-buttons").detach();e(".wpsi-nr-footer").append(g);var c=e(".form-table > tbody:nth-child(1) > tr:nth-child(7)").detach();e("#filter-inner ").append(c);var d="#"+window.location.hash.substr(1);e("ul.tabs li").click(function(){var j=e(this).attr("data-tab");e("ul.tabs li").removeClass("current");e(".tab-content").removeClass("current");e(this).addClass("current");e("#"+j).addClass("current")});var b=e(".tab-settings").attr("href");if(b===d){e(".tab-settings")[0].click();window.location.href=b}var f=JSON.parse(localStorage.getItem("formValues"))||{};var a=e("#wpsi-toggle-dashboard :checkbox");if(localStorage.getItem("wpsiDashboardDefaultsSet")===null){console.log("localstorage default not set, enable all");a.each(function(){f[this.id]="checked"});localStorage.setItem("formValues",JSON.stringify(f));localStorage.setItem("wpsiDashboardDefaultsSet","set")}a.on("change",function(){h()});function h(){a.each(function(){f[this.id]=this.checked});localStorage.setItem("formValues",JSON.stringify(f))}e.each(f,function(j,k){e("#"+j).prop("checked",k)});e("#wpsi-toggle-dashboard").hide();e("#wpsi-show-toggles").click(function(){if(e("#wpsi-toggle-dashboard").is(":visible")){e("#wpsi-toggle-dashboard").hide();e("#wpsi-toggle-arrows").attr("class","dashicons dashicons-arrow-down")}else{e("#wpsi-toggle-dashboard").show();e("#wpsi-toggle-arrows").attr("class","dashicons dashicons-arrow-up")}});e("#wpsi-delete-selected").attr("disabled",true);e(".dataTable tbody").on("click","tr",function(){e("#wpsi-delete-selected").attr("disabled",true);if(e(this).hasClass("wpsi-selected")){e(this).removeClass("wpsi-selected")}else{e(this).addClass("wpsi-selected")}var j=e(this).closest(".search-insights-table").find(".dataTable");j.find(".wpsi-selected").each(function(){e("#wpsi-delete-selected").attr("disabled",false)})});e(document).on("click","#wpsi-delete-selected",function(){var j=[];e(".dataTable").each(function(){var k=e(this);k.find(".wpsi-selected").each(function(){var l=e(this);j.push(e(this).find(".wpsi-term").data("term_id"));l.css("background-color","#d7263d2e")})});e.ajax({type:"POST",url:wpsi.ajaxurl,dataType:"json",data:({action:"wpsi_delete_terms",term_ids:JSON.stringify(j),token:wpsi.token}),success:function(k){e(".dataTable").each(function(){var l=e(this).DataTable();while(e(".wpsi-selected").length){l.row(".wpsi-selected").remove().draw(false)}});e("#wpsi-delete-selected").attr("disabled",true)}})})});